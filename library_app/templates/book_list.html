{% extends "base.html" %}
{% block title %}Book List{% endblock title %}
{% block content %}
<nav class="navbar bg-body-tertiary p-0">
  <div class="container-fluid p-4 border">
    <a href='/book_list' class="navbar-brand ms-5 fs-3"><strong>Library Books</strong></a>
    <div class="d-flex">
        <form class="d-flex" role="search">
        <input class="form-control me-2" type="search" name='search' placeholder="Search" aria-label="Search"/>
        <button class="btn btn-outline-success" type="submit">Search</button>
        </form>
        <a href="{% url "add_book" %}" class="btn btn-success ms-2">Add Book</a>
        <a href="{% url "logout" %}" class="btn btn-danger mx-2">Logout</a>
    </div>
  </div>
</nav>
{% if messages %}
{% for message in message %}
<div class="alert alert-primary" role="alert">
  {{message}}
</div>
{% endfor %}
{% endif %}
<div class="card border mx-2 my-4">
  <div class="card-header">
    <div class="d-flex justify-content-between">
      <p class="mb-0 fs-4 fw-bold">Book List</p>
      <a href="{% url "dashboard" %}" class="btn btn-primary">Go to Dashboard</a>
    </div>
  </div>
  <div class="card-body p-2">
    <table class="table table-hover table-bordered">
    <thead>
        <tr class="table-secondary">
        <th scope="col">Title</th>
        <th scope="col">Author</th>
        <th scope="col">ISBN</th>
        <th scope="col">Category</th>
        <th scope="col">Total Copies</th>
        <th scope="col">Availabe</th>
        <th scope="col">Action</th>
        </tr>
    </thead>
    <tbody class="table-group-divider">
        {% for book in books %}
        <tr>
        <td>{{book.title}}</td>
        <td>{{book.author}}</td>
        <td>{{book.isbn}}</td>
        <td>{{book.genre}}</td>
        <td>{{book.total_copies}}</td>
        <td>{{book.available_copies}}</td>
        <td>
            {% if book.available_copies > 0 %}
            <a href="{% url "borrow_book" book.id %}" class="btn btn-primary ms-1">Borrow</a>
            {% else %}
            <a  class="btn btn-secondary ms-1">Borrow</a>
            {% endif %}
            <a href="{% url "edit_book" book.id %}" class="btn btn-warning ms-1">Edit</a>
            <a href="{% url "delete_book" book.id %}" class="btn btn-danger mx-1">Delete</a>
        </td>
        </tr>
        {% endfor %}
    </tbody>
    </table>
  </div>
</div>
{% endblock content %}